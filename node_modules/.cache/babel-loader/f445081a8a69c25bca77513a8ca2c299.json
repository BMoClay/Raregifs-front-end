{"ast":null,"code":"import _defineProperty from\"/Users/benmorgan-cleveland/Development/code/Mod5/Raregifs-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/benmorgan-cleveland/Development/code/Mod5/Raregifs-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/benmorgan-cleveland/Development/code/Mod5/Raregifs-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';import GoogleLogin from'react-google-login';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var setCurrentUser=_ref.setCurrentUser;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState({name:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];function responseGoogle(response){if(response.tokenId){axios.post(\"/login/google\",null,{headers:{Authorization:\"Bearer \".concat(response.tokenId)}}).then(function(response){var _response$data=response.data,user=_response$data.user,token=_response$data.token;localStorage.setItem(\"token\",token);axios.defaults.headers.common[\"Authorization\"]=\"Bearer \".concat(token);setCurrentUser(user);history.push(\"/\");}).catch(function(error){setErrors(error.response.data.errors);});}}function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));}function handleSubmit(e){e.preventDefault();axios.post(\"/login\",formData).then(function(response){var _response$data2=response.data,user=_response$data2.user,token=_response$data2.token;localStorage.setItem(\"token\",token);axios.defaults.headers.common[\"Authorization\"]=\"Bearer \".concat(token);setCurrentUser(user);history.push(\"/\");}).catch(function(error){setErrors(error.response.data.errors);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsxs(\"form\",{style:{margin:'10px'},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Enter your username and password...\"}),/*#__PURE__*/_jsx(\"label\",{children:\"name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",autoComplete:\"off\",value:formData.name,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\"}),errors.map(function(error){return/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error},error);})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:'10px'},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Or login with Google\"}),/*#__PURE__*/_jsx(GoogleLogin,{clientId:process.env.REACT_APP_GOOGLE_CLIENT_ID,buttonText:\"Login\",onSuccess:responseGoogle,onFailure:responseGoogle,cookiePolicy:'single_host_origin'})]})]});}export default Login;","map":{"version":3,"sources":["/Users/benmorgan-cleveland/Development/code/Mod5/Raregifs-front-end/src/Components/Login.js"],"names":["React","useState","axios","useHistory","GoogleLogin","Login","setCurrentUser","history","errors","setErrors","name","password","formData","setFormData","responseGoogle","response","tokenId","post","headers","Authorization","then","data","user","token","localStorage","setItem","defaults","common","push","catch","error","handleChange","e","target","value","handleSubmit","preventDefault","margin","map","color","process","env","REACT_APP_GOOGLE_CLIENT_ID"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport GoogleLogin from 'react-google-login';\n\n\nfunction Login({ setCurrentUser }) {\n\n    const history = useHistory() \n    const [errors, setErrors] = useState([])\n    const [formData, setFormData] = useState({\n        name: \"\",\n        password: \"\",\n    });\n\n    function responseGoogle(response){\n        if (response.tokenId) {\n            axios.post(\"/login/google\", null, {\n                headers: {\n                    Authorization: `Bearer ${response.tokenId}`,\n                },\n            })\n            .then((response) => {\n                const { user, token } = response.data;\n                localStorage.setItem(\"token\", token);\n                axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n                setCurrentUser(user);\n                history.push(\"/\");\n            })\n            .catch((error) => {\n                setErrors(error.response.data.errors)\n            });\n        }\n    }\n\n    function handleChange(e) {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        axios.post(\"/login\", formData) \n            .then((response) => {\n                const { user, token } = response.data;\n                localStorage.setItem(\"token\", token);\n                axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n                setCurrentUser(user);\n                history.push(\"/\");\n            })\n            .catch((error) => {\n                setErrors(error.response.data.errors)\n            });\n    }\n \n  return (\n    <div className=\"login\">\n        <form style={{margin: '10px'}} onSubmit={handleSubmit}>\n            <h4>Enter your username and password...</h4>\n            <label>name</label>\n            <input\n                type=\"text\"\n                name=\"name\"\n                autoComplete=\"off\"\n                value={formData.name}\n                onChange={handleChange}\n            />\n            <label>password</label>\n            <input\n                type=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                autoComplete=\"current-password\"\n            />\n            <input type=\"submit\" value=\"Login\" />\n            {errors.map((error) => (\n                <p style={{ color: \"red\" }} key={error}>\n                    {error}\n                </p>\n                ))}\n        </form>\n        <hr/>\n        <div style={{margin: '10px'}}>\n            <h4>Or login with Google</h4>\n            <GoogleLogin\n                clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\n                buttonText=\"Login\"\n                onSuccess={responseGoogle}\n                onFailure={responseGoogle}\n                cookiePolicy={'single_host_origin'}\n            />  \n        </div>\n    </div>\n  );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}