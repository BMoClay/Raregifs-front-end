{"ast":null,"code":"import _defineProperty from\"/Users/benmorgan-cleveland/Development/code/Mod5/Raregifs-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/benmorgan-cleveland/Development/code/Mod5/Raregifs-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/benmorgan-cleveland/Development/code/Mod5/Raregifs-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';import GoogleLogin from'react-google-login';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(_ref){var setCurrentUser=_ref.setCurrentUser;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState({name:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];console.log(errors);function responseGoogle(response){if(response.tokenId){axios.post(\"/login/google\",null,{headers:{Authorization:\"Bearer \".concat(response.tokenId)}}).then(function(response){var _response$data=response.data,user=_response$data.user,token=_response$data.token;localStorage.setItem(\"token\",token);axios.defaults.headers.common[\"Authorization\"]=\"Bearer \".concat(token);setCurrentUser(user);history.push(\"/\");}).catch(function(error){setErrors(error.response.data.errors);});}}function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));}function handleSubmit(e){e.preventDefault();axios.post(\"/signup\",formData).then(function(response){var _response$data2=response.data,user=_response$data2.user,token=_response$data2.token;localStorage.setItem(\"token\",token);axios.defaults.headers.common['Authorization']=\"Bearer \".concat(token);setCurrentUser(user);history.push(\"/\");}).catch(function(error){setErrors(error.response.data.errors);});}var name=formData.name,password=formData.password;return/*#__PURE__*/_jsxs(\"div\",{className:\"signup\",children:[/*#__PURE__*/_jsxs(\"form\",{style:{margin:'10px'},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Create a username and password...\"}),/*#__PURE__*/_jsx(\"label\",{children:\"name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",autoComplete:\"off\",value:formData.name,onChange:handleChange// value={name}\n// onChange={handleChange}\n}),/*#__PURE__*/_jsx(\"label\",{children:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange// value={password}\n// onChange={handleChange}\n,autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Signup\"}),errors.map(function(error){return/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error},error);})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:'10px'},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Or signup with Google\"}),/*#__PURE__*/_jsx(GoogleLogin,{style:{margin:'10px'},clientId:process.env.REACT_APP_GOOGLE_CLIENT_ID,buttonText:\"Login\",onSuccess:responseGoogle,onFailure:responseGoogle,cookiePolicy:'single_host_origin'})]})]});}export default Signup;","map":{"version":3,"sources":["/Users/benmorgan-cleveland/Development/code/Mod5/Raregifs-front-end/src/Components/Signup.js"],"names":["React","useState","axios","useHistory","GoogleLogin","Signup","setCurrentUser","history","errors","setErrors","name","password","formData","setFormData","console","log","responseGoogle","response","tokenId","post","headers","Authorization","then","data","user","token","localStorage","setItem","defaults","common","push","catch","error","handleChange","e","target","value","handleSubmit","preventDefault","margin","map","color","process","env","REACT_APP_GOOGLE_CLIENT_ID"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport GoogleLogin from 'react-google-login';\n\nfunction Signup({ setCurrentUser }) {\n\n    const history = useHistory()\n    const [errors, setErrors] = useState([])\n    const [formData, setFormData] = useState({\n        name: \"\",\n        password: \"\",\n    });\n\n    console.log(errors)\n\n    function responseGoogle(response){\n        if (response.tokenId) {\n            axios.post(\"/login/google\", null, {\n                headers: {\n                    Authorization: `Bearer ${response.tokenId}`,\n                },\n            })\n            .then((response) => {\n                const { user, token } = response.data;\n                localStorage.setItem(\"token\", token);\n                axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n                setCurrentUser(user);\n                history.push(\"/\");\n            })\n            .catch((error) => {\n                setErrors(error.response.data.errors)\n            });\n        }\n    }\n\n    function handleChange(e) {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        axios.post(\"/signup\", formData)\n            .then((response) => {\n                const { user, token } = response.data;\n                localStorage.setItem(\"token\", token);\n                axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\n                setCurrentUser(user);\n                history.push(\"/\");\n            })\n            .catch((error) => {\n                setErrors(error.response.data.errors);\n            });\n    }\n\n    const { name, password } = formData\n \n  return (\n    <div className=\"signup\">\n        <form style={{margin: '10px'}} onSubmit={handleSubmit}>\n            <h4>Create a username and password...</h4>\n            <label>name</label>\n            <input\n                type=\"text\"\n                name=\"name\"\n                autoComplete=\"off\"\n                value={formData.name}\n                onChange={handleChange}\n                // value={name}\n                // onChange={handleChange}\n            />\n            <label>password</label>\n            <input\n                type=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                // value={password}\n                // onChange={handleChange}\n                autoComplete=\"current-password\"\n            />\n            <input type=\"submit\" value=\"Signup\" />\n            {errors.map((error) => (\n                <p style={{ color: \"red\" }} key={error}>\n                    {error}\n                </p>\n                ))}\n        </form>\n        <hr/>\n        <div style={{margin: '10px'}}>\n            <h4>Or signup with Google</h4>\n            <GoogleLogin \n                style={{margin: '10px'}}\n                clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\n                buttonText=\"Login\"\n                onSuccess={responseGoogle}\n                onFailure={responseGoogle}\n                cookiePolicy={'single_host_origin'}\n            />    \n        </div>\n    </div>\n  );\n}\n\nexport default Signup;"]},"metadata":{},"sourceType":"module"}